pipeline{
agent {
label "slave"
}
tools{
maven "m1"
}

stages{
stage('Build'){
steps{
echo 'Build started......................'
sh 'mvn clean install -DskipTests'
}
}
stage('Test'){
steps{
echo 'Testing.........................'
sh 'mvn test'
}
post{
always{
junit 'target/surefire-reports/*.xml'
archiveArtifacts 'target/*.jar'
}
}
}
stage('Run'){
steps{
echo 'Running.....................'
sh 'java -jar target/demo1-0.0.1-SNAPSHOT.jar'
sh 'wget https://localhost:8081/demo1/api/v1/projects'
}
}


}




}
